name: fan-ctrl
kind: chunk
build-commands:
- cd meta-facebook/meta-wedge/recipes-wedge/fan-ctrl/fan-ctrl && make
install-commands:
- install -d $DESTDIR/usr/local/fbpackages/fan-ctrl
- install -d $DESTDIR/usr/local/bin
- binfiles="get_fan_speed.sh init_pwm.sh set_fan_speed.sh fand"
- for f in ${binfiles}; do install -m 755 meta-facebook/meta-wedge/recipes-wedge/fan-ctrl/fan-ctrl/$f $DESTDIR/usr/local/fbpackages/fan-ctrl/${f}; ln -snf $DESTDIR/usr/local/fbpackages/fan-ctrl${f} $DESTDIR/usr/local/bin/${f}; done
#other files listed are currently ALL other files. we probably don't want all of them
- otherfiles="init_pwm.sh README setup-fan.sh Makefile fand.cpp watchdog.h watchdog.cpp"
- for f in ${otherfiles}; do install -m 644 meta-facebook/meta-wedge/recipes-wedge/fan-ctrl/fan-ctrl/${f} $DESTDIR/usr/local/fbpackages/fan-ctrl/${f}; done
- install -d $DESTDIR/etc/init.d
- install -d $DESTDIR/etc/rcS.d
- install -m 755 meta-facebook/meta-wedge/recipes-wedge/fan-ctrl/fan-ctrl/setup-fan.sh $DESTDIR/etc/init.d/setup-fan.sh
