name: fbutils
kind: chunk
install-commands:
- install -d $DESTDIR/usr/local/fbpackages/utils
- install -m 644 meta-facebook/meta-wedge/recipes-wedge/fbutils/files/ast-functions $DESTDIR/usr/local/fbpackages/utils/ast-functions
- install -d $DESTDIR/usr/local/bin
- binfiles="us_console.sh sol.sh power_led.sh post_led.sh reset_usb.sh mdio.py setup_rov.sh wedge_power.sh wedge_us_mac.sh bcm5396.py bcm5396_util.py setup_switch.py watch-fc.sh"
- for f in ${binfiles}; do install -m 755 meta-facebook/meta-wedge/recipes-wedge/fbutils/files/$f $DESTDIR/usr/local/fbpackages/utils/${f}; ln -s $DESTDIR/usr/local/fbpackages/utils/${f} $DESTDIR/usr/local/bin/${f}; done

# common lib and include files
- install -d $DESTDIR/usr/include/facebook
- install -m 0644 meta-facebook/meta-wedge/recipes-wedge/fbutils/files/src/include/log.h $DESTDIR/usr/include/facebook/log.h
- install -m 0644 meta-facebook/meta-wedge/recipes-wedge/fbutils/files/src/include/i2c-dev.h $DESTDIR/usr/include/facebook/i2c-dev.h

# TODO: After this, the fbutils_0.1.bb script modifies the init files.
# This needs translating from systemd
# TODO: there are a lot of repeated variables above which would be
# better stored once (for readability if nothing else)
